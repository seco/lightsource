<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Lightsource</title>
    <link href="bootstrap.min.css" rel="stylesheet">
    <link href="bootstrap-colorpicker.min.css" rel="stylesheet">
    <link href="lightsource.css" rel="stylesheet">
</head>

<body>
    <script id="lightsource-strip-template" type="text/x-jsrender">

            <table class="table table-xtra-condensed table-borderless">
            <thead>
            <tr class="active">
                <th>Pin</th>
                <th>Name</th>
                <th>Color</th>
                <th colspan="2">Type</th>
            </tr>
            </thead>
            <tbody>
                <tr>
                <td>
                    <input type="number" name="strips[][pin]" class="form-control input-sm" min="0" max="255" value="{{:pin}}">
                </td>
                <td>
                    <input type="text" name="strips[][name]" class="form-control input-sm" value="{{:name}}">
                </td>
                <td>
                    <div class="input-group colorpicker-component colorpicker-selector">
                        <input type="text" name="strips[][htmlColor]" value="{{:htmlColor}}" class="form-control input-sm" />
                        <span class="input-group-addon"><i></i></span>
                    </div>
                </td>
                <td>
                    <input type="number" name="strips[][type]" class="form-control input-sm" min="0" max="255" value="{{:type}}">
                </td>


                <td class="pull-right">
                    <button class="btn btn-sm btn-danger" type="button" onClick="removeStrip(this)">
                        <span class="glyphicon glyphicon-remove"></span>
                    </button>
                </td>
                </tr>
                </tbody>
                <thead>
                <tr>
                    <th></th>
                    <th>Name</th>
                    <th>Color</th>
                    <th>Start</th>
                    <th>End</th>
                </thead>
                </tr>
                <tbody>
                    {{for slices itemVar="~slice" tmpl="lightsource-slice-template"}}
                    {{/for}}

                    <tr>
                        <th>
                            <button class="btn btn-sm btn-success btn-add" type="button" strip="{{:~stripIndex}}" onClick="addSlice(this)">
                                <span class="glyphicon glyphicon-plus"></span>
                            </button>
                        </th>
                    </tr>
                </tbody>
        </table>

    </script>
    <script id="lightsource-slice-template" type="text/x-jsrender">
                <tr>
                    <td class="pull-right">
                        <button class="btn btn-sm btn-danger" type="button" onClick="removeSlice(this)">
                            <span class="glyphicon glyphicon-remove"></span>
                        </button>
                    </td>
                    <td>
                        <input type="text" name="strips[{{:~stripIndex}}][slices][][name]" class="form-control input-sm" value="{{:name}}" />
                    </td>
                    <td>
                        <div class="input-group colorpicker-component colorpicker-selector">
                            <input type="text" name="strips[{{:~stripIndex}}][slices][][htmlColor]" value="{{:htmlColor}}" class="form-control input-sm" />
                            <span class="input-group-addon"><i></i></span>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="strips[{{:~stripIndex}}][slices][][start]" class="form-control input-sm" min="0" max="255" value="{{:start}}">
                    </td>
                    <td>
                        <input type="number" name="strips[{{:~stripIndex}}][slices][][end]" class="form-control input-sm" min="0" max="255" value="{{:end}}">
                    </td>
                </tr>
    </script>

    <div class="container">

        <div class="row">
            <h2 class="text-muted">Lightsource config</h2>
        </div>

        <div class="row">

            <button class="btn btn-sm btn-success btn-add" type="button" onClick="addStrip(this)">
                <span class="glyphicon glyphicon-plus"></span>
            </button>

            <button class="btn btn-sm btn-primary lightsource-upload-config" type="button">
                <span class="glyphicon glyphicon-cloud-upload"></span>
            </button>

            <button class="btn btn-sm btn-default lightsource-test-config" type="button">
                <span class="glyphicon glyphicon-check"></span>
            </button>
        </div>

        <p />

        <div class="row">
            <form role="form" autocomplete="off" id="lightsource-config-form">

            </form>
        </div>
    </div>

    <!--<button type="button" class="btn btn-primary" data-toggle="modal" data-target=".bs-example-modal-sm">
    Small modal</button>
    -->
    <div class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel">
        <div class="modal-dialog modal-sm" role="document">

            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>

                    <h4 class="modal-title" id="myModalLabel">Config test</h4>
                </div>

                <div class="modal-body">
                    Your config is applied and tested, when done close this dialog
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Finish</button>
                </div>

            </div>
        </div>
    </div>

    <script src="jquery.min.js"></script>
    <script src="jquery.jsonrpc.js"></script>
    <script src="jquery.serialize-object.js"></script>
    <script src="jsrender.min.js"></script>
    <script src="bootstrap.min.js"></script>
    <script src="bootstrap-colorpicker.min.js"></script>
    <script src="lightsource.js"></script>
</body>
</html>